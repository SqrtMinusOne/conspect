# Решение логических задач
## Волк, овца, лодка и капуста
К берегу реки подошел человек, который вел с собой волка, овцу и нёс капусту. У реки человек обнаружил лодку. Задача - переправить это на другой берег.

Лодка маленькая; можно взять с собой либо овцу, либо волка, либо капусту.

Нельзя оставлять вместе волка и овцу или овцу и капусту.

Ограничения:
```prolog
constraint(wolf, sheep).
constraint(sheep,cabbage).
```

Проверка ограничений. Должна отработать в истину тогда, когда все ограничения не выполняются.

```prolog
test([X, Y]):- not(constraint(X, Y)), not(constraint(Y, X)).
```

Предикат перевозки:
```prolog
move(Lb, Pb, P, N, K)
```
* `Lb` - объекты на левом берегу
* `Pb` - объекты на правом берегу
* `P` - История движения
* `N` - направление $\\{l, r\\}$
* `K` - количество шагов.

Запуск программы:
```prolog
go(N) :- move([wolf, sheep, cabbage], [], [], r, N),
```

Печать результата:
```prolog
move([], _, P, _, _) :- write(P).
```

При первом ходе слева можно оставить тех, кто не съест друг друга, и обратно вернуться пустым.
```prolog
move([X,Y,Z],[], P, r, N):-
    N > 0, M is N - 1,
    (test([X, Z]), move([X, Z], [Y], [l, r(Y)|P], r, M) ;
     test([Y, Z]), move([Y, Z], [X], [l, r(X)|P], r, M) ;
     test([X, Y]), move([X, Y], [Z], [l, r(Z)|P], r, M)).
```

При втором ходе направо можно выбрать любого
```prolog
move([X, Y],[Z], P, r, N):-
    N > 0, M is N - 1,
    (move([Y], [X, Z], [r(X)|P], l, M) ;
     move([X], [Y, Z], [r(Y)|P], l, M)).
```

При возврате налево пустым можно возвращаться только если на правом берегу друг друга не съедят, иначе можно выбрать любого.

```prolog
move([X],[Y, Z], P, l, N):-
    N > 0, M is N - 1,
    (test([Y, Z]), move([X],[Y,Z], [l|P], r, M) ;
     move([Y, X], [Z], [l(Y)|P], r, M) ;
     move([Z, X], [Y], [l(Z)|P], r, M)).
```

При движении направо получаем последний ход
```prolog
move([X],[Y, Z], P, r, N):-
    N > 0, M is N - 1,
    move([], [X, Y, Z], [r(X)|P], _, M).
```

Решения:
```prolog
[r(sheep),l,r(cabbage),l(sheep),r(wolf),l,r(sheep)]
[r(sheep),l,r(wolf),l(sheep),r(cabbage),l,r(sheep)]
```
